function articleVoteing(e){e.preventDefault();var t=this.getAttribute("data-vote"),n=new FormData;n.append("user_rating",t);for(var r=".content_vote",l=0,s=_all(r+' input[type="hidden"]').length;s>l;l++)n.append(_all(r+' input[type="hidden"]')[l].name,_all(r+' input[type="hidden"]')[l].value);var i=new XMLHttpRequest,a=qs(r+' [name="url"]').value;i.open("POST",a),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var e=i.responseText,t=(new DOMParser).parseFromString(e,"text/html");addCL("has_vote","#art-vote"),qs("#response-vote").innerHTML=t.querySelector("#art-vote .voting_stars").innerHTML,qs("#response-text").innerHTML=t.querySelector("#system-message-container .sys_message").innerText}else qs("#response-vote").innerHTML="Ошибка"},i.send(n)}!function(){function e(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():this.requestFullscreen?this.requestFullscreen():this.msRequestFullscreen?this.msRequestFullscreen():this.mozRequestFullScreen?this.mozRequestFullScreen():this.webkitRequestFullscreen&&this.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}if(qs(".article_image img"))for(var t=qs(".article_image img").getAttribute("src"),n=_all("#articlebody img"),r=0;r<n.length;r++)n[r].getAttribute("src")===t&&(n[r].className="dn");if(qs("#articlebody iframe"))for(var l,s=_all("#articlebody iframe"),i=0;i<s.length;i++)l=s[i].getAttribute("src"),s[i].setAttribute("allowfullscreen",""),"https"!==l.substring(0,5)&&(l=l.replace("http","https")),-1!==l.indexOf("?")?s[i].setAttribute("src",l+"&rel=0"):s[i].setAttribute("src",l+"?rel=0");if(qs(".full_article img"))for(var a=_all(".full_article img"),u=0,c=a.length;u<c;u++)a[u].addEventListener("click",e)}();for(var vote_star=_all(".vote_star"),i=0,b=vote_star.length;i<b;i++)vote_star[i].addEventListener("click",articleVoteing);